---
export interface Story {
  id: string;
  title: string;
  description: string;
}

// TODO: Fetch these data from another file
const stories = [
  {
    id: 'fullstack',
    title: 'Fullstack for the Win',
    description:
      'When the software layers unite, a new hero rises in the world of code.',
  },
  {
    id: 'datacenter',
    title: 'A Mystery at the Data Center',
    description:
      'Silent servers and flickering lights, can you solve the data center’s nightly frights?',
  },
  {
    id: 'ai',
    title: 'AI for Animals',
    description:
      'In a twist of fate, the animal kingdom gets a digital mind to find the ultimate cheese.',
  },
  {
    id: 'object-storage',
    title: 'The Mandalorian’s Object Quest',
    description:
      'A lone ranger traverses the binary dunes in search of the galaxy’s lost objects.',
  },
  {
    id: 'cyber',
    title: 'Swiftly Stopping Cyber Attacks',
    description:
      'Cyber warriors gear up in a race against time to thwart a digital apocalypse.',
  },
  {
    id: 'to-the-moon',
    title: 'To the Moon',
    description:
      'Buckle up for an interstellar sprint to the moon where cryptic treasures await.',
  },
  {
    id: 'ddos',
    title: 'The History of DDoS Attacks',
    description:
      'Delve into the digital battleground where bytes become shields against nefarious network sieges.',
  },
  {
    id: 'firewall',
    title: 'My Kingdom for a Firewall',
    description:
      'Within the walls of silicon, a sovereign’s plea for a firewall ignites an epic cyber crusade.',
  },
  {
    id: 'cdn',
    title: 'The CDN Chronicles',
    description:
      'Journey across the distributed realms where content delivery is both art and war.',
  },
  {
    id: 'pacman',
    title: 'The Ultimate Game of Pac-Man',
    description:
      'Chomp through a labyrinthine odyssey where ghosts lurk and power-pellets decide fates.',
  },
];

export function selectStory(storyId: string): void {
  const url = new URL(window.location.href);
  url.searchParams.set('story', storyId);
  window.location.href = url.toString();
}

function getColor(index: number) {
  const colors = [
    '#007bff', '#6610f2', '#6f42c1', '#e83e8c',
      '#dc3545', '#fd7e14', '#ffc107', '#28a745',
      '#20c997', '#17a2b8', '#343a40'
  ];
  return colors[index % colors.length]; 
}

---

<section>
  <div class='story-grid'>
    {
      stories.map((story, index) => (
        <button
          class='story-card'
          data-story-id={story.id}
          onclick='selectStory(this.dataset.storyId)'
          style={`background-color: ${getColor(index)};`}>
          <h3>{story.title}</h3>
          <p>{story.description}</p>
        </button>
      ))
    }
  </div>
</section>

<style>
  .story-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    padding: 1rem;
  }

  .story-card {
    border: 1px solid #ccc;
    border-radius: 4px;
    padding: 1rem;
    text-align: center;
    cursor: pointer;
    background: white;
    color: #fff;
    border: none;
    margin: 0;
    font-size: .8em;
    overflow: visible;
    text-transform: none;
    -webkit-appearance: button;
  }

  .story-card:hover {
    background-color: #f0f0f0;
  }
</style>
